<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="How to set up a Team Fortress 2 steam server-setup">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Team Fortress 2 Server Install for Dummies | ifcuriousthenlearn</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://nagordon.github.io/ifcuriousthenlearn/posts/tf2-server-setup/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="neal">
<link rel="next" href="../matlab-to-python-conversion/" title="MATLAB to python conversion" type="text/html">
<meta property="og:site_name" content="ifcuriousthenlearn">
<meta property="og:title" content="Team Fortress 2 Server Install for Dummies">
<meta property="og:url" content="https://nagordon.github.io/ifcuriousthenlearn/posts/tf2-server-setup/">
<meta property="og:description" content="How to set up a Team Fortress 2 steam server-setup">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-03-14T00:00:00-08:00">
<meta property="article:tag" content="gaming">
<meta property="article:tag" content="linux">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../">

            <span id="blog-title">ifcuriousthenlearn</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="index.md" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../about/" class="nav-link">About</a>
                </li>
<li class="nav-item">
<a href="../../archive/" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Team Fortress 2 Server Install for Dummies</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    neal
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2015-03-14T00:00:00-08:00" itemprop="datePublished" title="2015-03-14 00:00">2015-03-14 00:00</time></a>
            </p>
            
        <p class="sourceline"><a href="index.md" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>For those of us who remember playing games on dos, steam[http://store.steampowered.com/]
is a nice program for purchasing, managing, and playing video games. I grew up playing LAN games because dial-up just wasn't fast enough for online gaming, and it is way more fun to play games in the same room with your friends rather than random people online.</p>
<p>Things have changed since those days. Internet speeds and just fine for online gaming, but I still prefer LAN games because, again, it is way more fun to game with your friends in the same room. So, I enjoy hosting LAN games, and I found setting up a local server a fun technical challenge, and If you are interested in doing the same, this should help you do it.</p>
<p>The cool things with steam servers is you don't even need an account. You can create an anonymous server that is not affiliated with you.</p>
<h3>
<strong>Step 1</strong> - Get a free operating system</h3>
<p>Get a Debain based Linux computer. I am using an older samsung laptop (6 GB, i5 processor) running <a href="http://www.linuxmint.com/edition.php?id=172">mint-cinnamon</a></p>
<h3>
<strong>Step 2</strong> - Install dependent software</h3>
<p>Get to your linux terminal and install the required software by running this command
<code>sudo apt-get install gdb mailutils postfix lib32gcc1</code></p>
<h3>
<strong>Step 3</strong> - Create server user account</h3>
<p>Create a user for the server admin, assign a password, and login to tf2server account</p>
<pre class="code literal-block"><span></span><code>adduser tf2server
passwd tf2server
su tf2server
</code></pre>


<h3>
<strong>Step 4</strong> - Install steam server software</h3>
<p>There are multiple ways of doing this. One is to follow the <a href="https://wiki.teamfortress.com/wiki/Linux_dedicated_server">steam installation</a> or another <a href="http://stevenbenner.com/2010/11/how-to-set-up-a-team-fortress-2-dedicated-server-on-ubuntu/">tutorial</a> or <a href="http://danielgibbs.co.uk/lgsm/tf2server/">another tutorial</a>, which is what I recommend and used.  </p>
<p>This will download the script, make it executable, and execute the installation</p>
<pre class="code literal-block"><span></span><code>wget http://danielgibbs.co.uk/dl/tf2server
chmod +x tf2server
./tf2server install
</code></pre>


<h3>
<strong>Step 5</strong> - Start the server</h3>
<p>Go to the tf2server home directory <code>cd ~</code> which will take you to <code>/home/tf2server/</code> and use these commands to manage your server  </p>
<pre class="code literal-block"><span></span><code>./tf2server start
./tf2server stop
./tf2server restart
./tf2server details
</code></pre>


<p>Type <code>./tf2server start</code> to start the server</p>
<h3>
<strong>Step 6</strong> - Connect via LAN</h3>
<p>if you run <code>./tf2server details</code> you will see a bunch of output  </p>
<pre class="code literal-block"><span></span><code><span class="n">Team</span> <span class="n">Fortress</span> <span class="mi">2</span> <span class="n">Server</span> <span class="n">Details</span>
<span class="o">================================================================================================================================================</span>
<span class="n">Server</span> <span class="n">name</span><span class="p">:</span>    <span class="n">tf2</span> <span class="n">server</span> <span class="mi">1</span>
<span class="n">Server</span> <span class="n">IP</span><span class="p">:</span>      <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">196</span><span class="p">:</span><span class="mi">27015</span>
<span class="n">RCON</span> <span class="n">password</span><span class="p">:</span>  <span class="n">tf2server</span>
<span class="n">Status</span><span class="p">:</span>         <span class="n">ONLINE</span>

<span class="n">Command</span><span class="o">-</span><span class="n">line</span> <span class="k">Parameters</span>
<span class="o">================================================================================================================================================</span>
<span class="p">.</span><span class="o">/</span><span class="n">srcds_run</span> <span class="o">-</span><span class="n">game</span> <span class="n">tf</span> <span class="o">-</span><span class="n">strictportbind</span> <span class="o">-</span><span class="n">ip</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">196</span> <span class="o">-</span><span class="n">port</span> <span class="mi">27015</span> <span class="o">+</span><span class="n">clientport</span> <span class="mi">27005</span> <span class="o">+</span><span class="n">tv_port</span> <span class="mi">27020</span> <span class="o">-</span><span class="n">tickrate</span>  <span class="o">+</span><span class="k">map</span> <span class="n">pl_goldrush</span> <span class="o">+</span><span class="n">servercfgfile</span> <span class="n">tf2</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">maxplayers</span> <span class="mi">16</span>
</code></pre>


<p>what we want here is the local ip and port <code>Server IP: 192.168.1.196:27015</code></p>
<p>Now we can connect locally by launching Team Fortress 2, hit <code>~</code> to drop down the console and type <code>connect 192.168.1.196:27015</code> and that should connect you to the server locally</p>
<h3>
<strong>Step 7</strong> - Set up a Public Server</h3>
<p>If you want to make this a public server, we need to do a few more things. First, I needed to remove the <code>-strictportbind</code> portion on the command-line properties in the file located in <code>/tf2server/tf2server</code> file so that an unused port is chosen, so when you restart the tf2server, it may choose a different port to allow for online access.</p>
<p>After that, I access my default router IP via a web browser with <code>192.168.1.1</code> and set up a port forward on the server IP and port</p>
<p>Now, restart the tf2server with <code>./tf2server restart</code> and go to the console <code>./tf2server console</code> and look at some of the output. Note, this script uses tmux, which allows us to log out of the server and keep the server running. Here, you can run all the comamnds to manage the server</p>
<p>You should see somewhere in the top the public ip address of the server computer</p>
<pre class="code literal-block"><span></span><code><span class="err">Connection to Steam servers successful.</span>
<span class="err">   Public IP is 12.34.56.78.</span>
</code></pre>


<p>and</p>
<pre class="code literal-block"><span></span><code>Network: IP <span class="m">192</span>.168.1.196, mode MP, dedicated Yes, ports <span class="m">27015</span> SV / <span class="m">27005</span> CL
</code></pre>


<h3>
<strong>Step 8</strong> - Connect to your public server</h3>
<p>Now we have all the information we need to create public server, the public IP and the SV port it selected. Finally launch Steam and do</p>
<blockquote>
<p>Severs -&gt; Favorites -&gt; Add a Server -&gt; enter <code>12.34.56.78:27015</code></p>
</blockquote>
<p>Now you have a public server!</p>
<p>if you want to play without people, add some bots. Go to your console via <code>./tf2server console</code> and add some bots<code>tf_bot_add 4</code> change the level to <code>changelevel pl_goldrush</code></p>
<p>I have found many maps don't work well with bots. The maps I have listed below seemed to work well.</p>
<h3>Server Customization</h3>
<p>To customize your server there are a few files you should edit. Make sure you make a backup of each in case it gets messed up</p>
<p>The configuration file updates the server every time a new map loads. Here is mine.
/home/tf2server/serverfiles/tf/cfg/tf2-server.cfg</p>
<pre class="code literal-block"><span></span><code><span class="err">mp_disable_respawn_times 0</span>
<span class="err">tf_bot_quota 13</span>
<span class="err">tf_bot_quota_mode "fill"</span>
<span class="err">tf_bot_difficulty 1</span>
<span class="err">mp_timelimit 15</span>
<span class="err">mp_maxrounds 5</span>
<span class="err">mp_winlimit</span>
<span class="err">sv_cheats 0</span>
<span class="err">tf_bot_melee_only 0</span>
</code></pre>


<p>/home/tf2server/serverfiles/tf/cfg/mapcycle_default.txt
The mapcycle file tells the server which map to go to next. if you use <code>changelevel pl_barnblitz</code>, it will begin the cycle there</p>
<pre class="code literal-block"><span></span><code><span class="err">pl_badwater</span>
<span class="err">pl_goldrush</span>
<span class="err">pl_upward</span>
<span class="err">pl_barnblitz</span>
<span class="err">pl_hoodoo_final</span>
<span class="err">koth_viaduct</span>
<span class="err">koth_nucleus</span>
<span class="err">koth_harvest_final</span>
<span class="err">koth_lakeside_final</span>
<span class="err">koth_badlands</span>
<span class="err">koth_king</span>
<span class="err">plr_pipeline</span>
<span class="err">plr_hightower</span>
<span class="err">pl_thundermountain</span>
<span class="err">pl_frontier_final</span>
</code></pre>


<p>If you want to use your xbox controller, from the client computer access the console via <code>~</code> and run <code>exec 260controller</code></p>
<p>Enjoy!</p>
<p>Here are some links that I found helpful <br>
https://wiki.teamfortress.com/wiki/Linux_dedicated_server<br>
http://danielgibbs.co.uk/lgsm/tf2server/<br>
http://stevenbenner.com/2010/11/how-to-set-up-a-team-fortress-2-dedicated-server-on-ubuntu/<br>
https://developer.valvesoftware.com/wiki/List_of_TF2_console_commands_and_variables<br>
https://developer.valvesoftware.com/wiki/Console_Command_List<br>
http://steamcommunity.com/sharedfiles/filedetails/?id=250332112<br>
https://wiki.teamfortress.com/wiki/Linux_dedicated_server<br>
https://wiki.teamfortress.com/wiki/Bots  </p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/gaming/" rel="tag">gaming</a></li>
            <li><a class="tag p-category" href="../../categories/linux/" rel="tag">linux</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="next">
                <a href="../matlab-to-python-conversion/" rel="next" title="MATLAB to python conversion">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2021         <a href="mailto:">neal</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
